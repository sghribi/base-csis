{% extends 'CSISEamBundle::layout.html.twig' %}
{% import 'CSISEamBundle:Eam:pagination.html.twig' as pagination %}

{% block csis_body %}
        
    <div class="row">
        <div class="span12">
            {% include 'CSISEamBundle:Eam:flash.html.twig' %}
            {% include 'CSISEamBundle:Eam:mainflash.html.twig' %}
        </div>
    </div>

    <div class="row">

        {# Liste des Familles #}
        <div class="span12">
            <div class="well"> 
                <h4 class="span11">Liste des Familles
                    {# Definition des bouttons #}
                    <div class="pull-right">       
                        <a class="btn btn-success" href="{{ path('category_new') }}" data-toggle="tooltip" title="Créer une nouvelle Famille">
                            <i class="icon-plus icon-white"></i>
                            Ajouter
                        </a>
                    </div>
                </h4>

                <table class="table table-striped table-hover" style="max-height:400px;overflow:auto">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Description</th>
                            <th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th>
                        </tr>
                    </thead>
                    <tbody>  
                    {# Affiche toutes les familles par ordre alphabétique #}
                    {% for category in categories %}
                        <tr>
                            <td>{{ category.name }}</td> {# Nom de la famille #}
                            <td>{{ category.description }}</td> {# Description de la famille #}
                            <td><a href="{{ path('category_show', { 'id': category.id }) }}" class="icon-eye-open" data-toggle="tooltip" title="Afficher" ></a></td> {# Afficher #}
                            {% if is_granted("ROLE_GEST_CATEGORIE") %}
                                <td><a href="{{ path('category_edit', { 'id': category.id }) }}" class="icon-edit" data-toggle="tooltip" title="Modifier" ></a></td> {# Modifier #}
                                <td><a href="{{ path('category_ask_delete', { 'id': category.id }) }}" class="icon-remove" data-toggle="tooltip" title="Supprimer" ></a></td> {# Supprimer #}
                            {% endif %}
                        </tr>
                    {% else %}
                        <tr>
                            <td>
                                <strong>Il n'y a aucune Famille à afficher pour la page {{ page }} !</strong><br />
                                <a href="{{ path('category') }}">retour</a></td>
                            </td>
                            <td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>          
            </div>
                
            {{ pagination.pagination('category', page, nbPages) }}
                
        </div>
    </div>

{% endblock %}